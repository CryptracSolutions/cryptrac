#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

diff_output=$(git diff --cached --unified=0 --diff-filter=ACMR)

if [ -z "$diff_output" ]; then
  exit 0
fi

if echo "$diff_output" | grep -E '^-.*\b(md|lg|xl):' >/dev/null; then
  echo "\033[33m⚠️  Warning:\033[0m Desktop breakpoint class removal detected (md:/lg:/xl:). Confirm this change keeps desktop layout intact."
fi

if echo "$diff_output" | grep -E "^\\+.*([[:space:]\"'\\(\\[])-(md|lg):" >/dev/null; then
  echo "\033[31m❌ Error:\033[0m Detected forbidden negative breakpoint usage (-md variant or -lg variant). Remove or replace with mobile-only additive styles."
  exit 1
fi

exit 0
